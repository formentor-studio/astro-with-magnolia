name: ğŸš€ Build site when contents changed
on:
  repository_dispatch:
    types: [contents_changed]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # Checkout repository
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      # Setup Node
      - name: âš™ï¸ Use Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20.x"

      # Install dependencies
      - name: ğŸ“¦ Install dependencies
        run: npm ci
      
      # Build site
      - name: ğŸ—ï¸ Build site
        run: | 
          npm run build

      # Upload site.
      - name: ğŸš› Upload site
        run: |
          aws s3 sync dist/ s3://${{ vars.AWS_S3_BUCKET }} --quiet          
  